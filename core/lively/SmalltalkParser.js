module('lively.SmalltalkParser').requires('ometa.parser','lively.SmalltalkParserSupport').toRun(function() {
{SmalltalkParser=Object.delegated(Parser,{
"space":function(){var $elf=this;return this._or((function(){return Parser._superApplyWithArgs(this,"space")}),(function(){return this._applyWithArgs("fromTo","\"","\"")}))},
"identifier":function(){var $elf=this,x,xs;return (function(){x=this._apply("letter");xs=this._many((function(){return this._apply("letterOrDigit")}));return [x].concat(xs).join("")}).call(this)},
"unaryId":function(){var $elf=this,x;return (function(){this._apply("spaces");x=this._apply("identifier");this._not((function(){return this._applyWithArgs("exactly",":")}));return x}).call(this)},
"binaryOp":function(){var $elf=this,c,cs;return (function(){this._apply("spaces");cs=this._many1((function(){return (function(){c=this._apply("char");this._pred(SmalltalkParser.isBinaryChar(c));return c}).call(this)}));return cs.join("")}).call(this)},
"keywordPart":function(){var $elf=this,x;return (function(){this._apply("spaces");x=this._apply("identifier");this._applyWithArgs("exactly",":");return (x + ":")}).call(this)},
"variable":function(){var $elf=this,name;return (function(){this._apply("spaces");name=this._apply("identifier");return new StVariableNode(name)}).call(this)},
"instanceVariable":function(){var $elf=this,name;return (function(){this._applyWithArgs("token","@");name=this._apply("identifier");return new StInstanceVariableNode(("@" + name))}).call(this)},
"literal":function(){var $elf=this,v;return (function(){v=this._or((function(){return this._apply("stringLiteral")}),(function(){return this._apply("numberLiteral")}));return new StLiteralNode(v)}).call(this)},
"numberLiteral":function(){var $elf=this,sign,num1,num2;return (function(){sign=this._or((function(){return (function(){switch(this._apply('anything')){case "+":return (1);case "-":return (- (1));default: throw fail}}).call(this)}),(function(){return (function(){this._apply("empty");return (1)}).call(this)}));num1=this._many1((function(){return this._apply("digit")}));num2=this._or((function(){return (function(){switch(this._apply('anything')){case ".":return this._many1((function(){return this._apply("digit")}));default: throw fail}}).call(this)}),(function(){return (function(){this._apply("empty");return "0"}).call(this)}));return (sign * Number(num1.concat(["."]).concat(num2).inject("",(function (num,ea){return (num + ea)}))))}).call(this)},
"stringLiteral":function(){var $elf=this,val;return (function(){this._applyWithArgs("exactly","\'");val=this._many((function(){return this._or((function(){return (function(){this._applyWithArgs("token","\'\'");return "\'"}).call(this)}),(function(){return (function(){this._not((function(){return this._applyWithArgs("exactly","\'")}));return this._apply("char")}).call(this)}))}));this._applyWithArgs("exactly","\'");return val.join("")}).call(this)},
"arrayLiteral":function(){var $elf=this,seq;return (function(){this._applyWithArgs("token","#{");seq=this._apply("sequence");this._applyWithArgs("token","}");return new StArrayLiteralNode(seq)}).call(this)},
"primary":function(){var $elf=this,e;return (function(){this._apply("spaces");return this._or((function(){return this._apply("variable")}),(function(){return this._apply("instanceVariable")}),(function(){return this._apply("literal")}),(function(){return this._apply("arrayLiteral")}),(function(){return (function(){switch(this._apply('anything')){case "(":return (function(){e=this._apply("expression");this._applyWithArgs("exactly",")");return e}).call(this);default: throw fail}}).call(this)}),(function(){return this._apply("block")}))}).call(this)},
"expression":function(){var $elf=this;return this._or((function(){return this._apply("exit")}),(function(){return this._apply("cascade")}),(function(){return this._apply("assignment")}),(function(){return this._apply("evaluation")}))},
"exit":function(){var $elf=this,e;return (function(){this._applyWithArgs("token","^");e=this._apply("expression");return new StReturnNode(e)}).call(this)},
"assignment":function(){var $elf=this,variable,value;return (function(){variable=this._or((function(){return this._apply("variable")}),(function(){return this._apply("instanceVariable")}));this._applyWithArgs("token",":=");value=this._apply("expression");return new StAssignmentNode(variable,value)}).call(this)},
"cascade":function(){var $elf=this,first,msgNodes;return (function(){first=this._apply("evaluation");msgNodes=this._many1((function(){return (function(){this._applyWithArgs("token",";");return this._apply("message")}).call(this)}));return (function (){if((! first["isMessage"])){throw new Error("First part of cascade not message")}else{undefined};var receiver=first["receiver"];(msgNodes=[first].concat(msgNodes));msgNodes.forEach((function (ea){(ea["receiver"]=receiver)}));return new StCascadeNode(msgNodes,receiver)}).call(this)}).call(this)},
"evaluation":function(){var $elf=this;return this._apply("keywordSend")},
"message":function(){var $elf=this;return this._or((function(){return this._apply("keywordMsg")}),(function(){return this._apply("binaryMsg")}),(function(){return this._apply("unaryMsg")}))},
"unarySend":function(){var $elf=this,rec,msgNodes;return (function(){rec=this._apply("primary");msgNodes=this._many((function(){return this._apply("unaryMsg")}));return msgNodes.inject(rec,(function (receiver,node){node.setReceiver(receiver);return node}))}).call(this)},
"unaryMsg":function(){var $elf=this,name;return (function(){name=this._apply("unaryId");return new StUnaryMessageNode(name,null,null)}).call(this)},
"binarySend":function(){var $elf=this,rec,nodes;return (function(){rec=this._apply("unarySend");nodes=this._many((function(){return this._apply("binaryMsg")}));return nodes.inject(rec,(function (receiver,node){node.setReceiver(receiver);return node}))}).call(this)},
"binaryMsg":function(){var $elf=this,name,arg;return (function(){name=this._apply("binaryOp");arg=this._apply("unarySend");return new StBinaryMessageNode(name,[arg],null)}).call(this)},
"keywordSend":function(){var $elf=this,rec,msgNode;return this._or((function(){return (function(){rec=this._apply("binarySend");msgNode=this._apply("keywordMsg");return (function (){msgNode.setReceiver(rec);return msgNode}).call(this)}).call(this)}),(function(){return this._apply("binarySend")}))},
"keywordMsg":function(){var $elf=this,keyword,arg,partsAndArgs;return (function(){partsAndArgs=this._many1((function(){return (function(){keyword=this._apply("keywordPart");arg=this._apply("binarySend");return [keyword,arg]}).call(this)}));return (function (){{var name="";var args=[]};partsAndArgs.forEach((function (ea){(name+=ea[(0)]);args.push(ea[(1)])}));return new StKeywordMessageNode(name,args,null)}).call(this)}).call(this)},
"block":function(){var $elf=this,args,declared,s;return (function(){this._applyWithArgs("token","[");args=this._applyWithArgs("opt","blockArgs");declared=this._applyWithArgs("opt","declaredVars");s=this._applyWithArgs("opt","sequence");this._applyWithArgs("token","]");return new StInvokableNode(s,args,declared)}).call(this)},
"blockArgs":function(){var $elf=this,arg,args;return (function(){args=this._many1((function(){return (function(){this._applyWithArgs("token",":");arg=this._apply("identifier");return arg}).call(this)}));this._applyWithArgs("token","|");return args}).call(this)},
"sequence":function(){var $elf=this,e,children;return (function(){children=this._many1((function(){return (function(){e=this._apply("expression");this._or((function(){return this._applyWithArgs("token",".")}),(function(){return this._apply("empty")}));return e}).call(this)}));return new StSequenceNode(children)}).call(this)},
"declaredVars":function(){var $elf=this,v,vars;return (function(){this._applyWithArgs("token","|");vars=this._many((function(){return v=this._apply("variable")}));this._applyWithArgs("token","|");return vars}).call(this)},
"propertyOrMethod":function(){var $elf=this,start,isMeta,p,node,end;return (function(){start=this._apply("pos");this._apply("spaces");isMeta=(function(){switch(this._apply('anything')){case "-":return false;case "+":return true;default: throw fail}}).call(this);node=this._or((function(){return (function(){p=this._apply("property");this._applyWithArgs("token",".");return p}).call(this)}),(function(){return this._apply("method")}));end=this._apply("pos");this._apply("spaces");return (function (){node.setMeta(isMeta);(node["type"]="propertyOrMethod");(node["startIndex"]=start);(node["stopIndex"]=(end - (1)));return node}).call(this)}).call(this)},
"property":function(){var $elf=this,assgn;return (function(){assgn=this._apply("assignment");return new StPropertyNode(assgn)}).call(this)},
"method":function(){var $elf=this,nameAndArgs,methodNode;return (function(){nameAndArgs=this._apply("methodNameAndArgs");methodNode=this._or((function(){return this._apply("primitiveBody")}),(function(){return this._apply("stMethodBody")}));return (function (){methodNode.setMethodName(nameAndArgs[(0)]);methodNode.setArgs(nameAndArgs[(1)]);return methodNode}).call(this)}).call(this)},
"stMethodBody":function(){var $elf=this,vars,seq;return (function(){vars=this._applyWithArgs("opt","declaredVars");seq=this._applyWithArgs("opt","sequence");return new StInvokableNode(seq,null,vars)}).call(this)},
"primitiveBody":function(){var $elf=this,c,t,body;return (function(){this._applyWithArgs("token","{");($elf["count"]=(0));body=this._many((function(){return this._or((function(){return (function(){this._not((function(){return this._applyWithArgs("exactly","}")}));c=this._apply("char");return (function (){if((c == "{")){$elf["count"]++}else{undefined};return c}).call(this)}).call(this)}),(function(){return (function(){this._pred(($elf["count"] > (0)));t=this._applyWithArgs("token","}");return (function (){$elf["count"]--;return t}).call(this)}).call(this)}))}));this._applyWithArgs("token","}");this._or((function(){return this._applyWithArgs("token",".")}),(function(){return this._apply("empty")}));return new StPrimitveMethodNode(null,(("{" + body.join("")) + "}"))}).call(this)},
"methodNameAndArgs":function(){var $elf=this,keyword,arg,partsAndArgs,msgName,arg,msgName;return this._or((function(){return (function(){partsAndArgs=this._many1((function(){return (function(){keyword=this._apply("keywordPart");this._apply("spaces");arg=this._apply("identifier");return [keyword,arg]}).call(this)}));return (function (){var name="";var args=[];partsAndArgs.forEach((function (ea){(name+=ea[(0)]);args.push(ea[(1)])}));return [name,args]}).call(this)}).call(this)}),(function(){return (function(){msgName=this._apply("binaryOp");this._apply("spaces");arg=this._apply("identifier");return [msgName,[arg]]}).call(this)}),(function(){return (function(){msgName=this._apply("unaryId");return [msgName,null]}).call(this)}))},
"smalltalkClass":function(){var $elf=this,p,n,name,superclass,methodsAndProperties;return (function(){p=this._apply("pos");this._applyWithArgs("token","<");name=(function(){n=this._apply("identifier");return new StLiteralNode(n)}).call(this);this._or((function(){return (function(){this._applyWithArgs("token",":");return superclass=this._apply("variable")}).call(this)}),(function(){return this._apply("empty")}));this._applyWithArgs("token",">");this._apply("spaces");methodsAndProperties=this._many((function(){return this._apply("propertyOrMethod")}));this._apply("spaces");return (function (){var klass=new StClassNode(name,methodsAndProperties,superclass);(klass["type"]="smalltalkClass");(klass["startIndex"]=p);(klass["stopIndex"]=(this.pos() - (1)));return klass}).call(this)}).call(this)},
"smalltalkClasses":function(){var $elf=this,p,cls;return (function(){p=this._apply("pos");cls=this._many((function(){return this._apply("smalltalkClass")}));this._apply("end");return (function (){var all=new StFileNode(cls);(all["type"]="smalltalkClasses");(all["startIndex"]=p);(all["stopIndex"]=(this.pos() - (1)));return all}).call(this)}).call(this)},
"opt":function(){var $elf=this,rule;return (function(){rule=this._apply("anything");return this._or((function(){return this._applyWithArgs("apply",rule)}),(function(){return (function(){this._apply("empty");return null}).call(this)}))}).call(this)},
"fromTo":function(){var $elf=this,x,y;return (function(){x=this._apply("anything");y=this._apply("anything");this._applyWithArgs("seq",x);this._many((function(){return (function(){this._not((function(){return this._applyWithArgs("seq",y)}));return this._apply("char")}).call(this)}));return this._applyWithArgs("seq",y)}).call(this)},
"log":function(){var $elf=this,x;return (function(){x=this._apply("anything");return (function (){console.log(x);return true}).call(this)}).call(this)}});(SmalltalkParser["isBinaryChar"]=(function (c){var x=c.charCodeAt((0));return (((((((((((((((((x >= (1)) && (x <= (8))) || (x == (11))) || ((x >= (14)) && (x <= (29)))) || (x == (31))) || (x == (33))) || (x == (37))) || (x == (38))) || ((x >= (42)) && (x <= (45)))) || (x == (47))) || ((x >= (60)) && (x <= (64)))) || (x == (92))) || (x == (96))) || ((x >= (126)) && (x <= (191)))) || (x == (215))) || (x == (247))) || (x == (256)))}));JS2StConverter=Object.delegated(OMeta,{
"trans":function(){var $elf=this,t,ans;return (function(){this._form((function(){return (function(){t=this._apply("anything");return ans=this._applyWithArgs("apply",t)}).call(this)}));return ans}).call(this)},
"begin":function(){var $elf=this,xs;return (function(){xs=this._many((function(){return this._apply("trans")}));this._apply("end");return new StSequenceNode(xs)}).call(this)},
"json":function(){var $elf=this,props;return (function(){props=this._many((function(){return this._apply("trans")}));return props}).call(this)},
"for":function(){var $elf=this;return false},
"continue":function(){var $elf=this;return false},
"var":function(){var $elf=this;return false},
"this":function(){var $elf=this;return new StVariableNode("self")},
"number":function(){var $elf=this,n;return (function(){n=this._apply("anything");return new StLiteralNode(n)}).call(this)},
"string":function(){var $elf=this,s;return (function(){s=this._apply("anything");return new StLiteralNode(s)}).call(this)},
"get":function(){var $elf=this,x;return (function(){x=this._apply("anything");return (function (){if(((x == "undefined") || (x == "null"))){(x="nil")}else{undefined};return new StVariableNode(x)}).call(this)}).call(this)},
"getp":function(){var $elf=this;return this._or((function(){return this._apply("getInstVar")}),(function(){return this._apply("getVarOfOtherObject")}))},
"getInstVar":function(){var $elf=this,what,obj;return (function(){what=this._apply("trans");this._pred(what["isLiteral"]);obj=this._apply("trans");this._pred((obj["name"] == "self"));return new StInstanceVariableNode(("@" + what["value"]))}).call(this)},
"getVarOfOtherObject":function(){var $elf=this,what,obj;return (function(){what=this._apply("trans");obj=this._apply("trans");return new StKeywordMessageNode("getVar:",[what],obj)}).call(this)},
"binop":function(){var $elf=this,op,recv,arg;return (function(){op=this._apply("anything");recv=this._apply("trans");arg=this._apply("trans");return new StBinaryMessageNode(op,[arg],recv)}).call(this)},
"send":function(){var $elf=this;return this._or((function(){return this._apply("classDef")}),(function(){return this._apply("normalSend")}))},
"normalSend":function(){var $elf=this,name,recv,args;return (function(){name=this._apply("anything");recv=this._apply("trans");args=this._many((function(){return this._apply("trans")}));return new StKeywordMessageNode((name + ":"),args,recv)}).call(this)},
"classDef":function(){var $elf=this,msg,superclass,name,body;return (function(){msg=this._apply("anything");this._pred((msg == "subclass"));superclass=this._apply("trans");name=this._apply("trans");body=this._or((function(){return this._apply("trans")}),(function(){return (function(){this._apply("empty");return []}).call(this)}));return new StClassNode(name,body,superclass)}).call(this)},
"func":function(){var $elf=this,args,body;return (function(){args=this._apply("anything");body=this._apply("trans");return new StInvokableNode(body,args,[])}).call(this)},
"binding":function(){var $elf=this;return this._or((function(){return this._apply("methodBinding")}),(function(){return this._apply("propertyBinding")}),(function(){return this._apply("primitiveMethod")}))},
"methodBinding":function(){var $elf=this,name,invokable;return (function(){name=this._apply("anything");invokable=this._apply("trans");this._pred(invokable["isBlock"]);return (function (){invokable.setMethodName(name);return invokable}).call(this)}).call(this)},
"primitiveMethod":function(){var $elf=this,name,args,body;return (function(){name=this._apply("anything");this._form((function(){return (function(){this._applyWithArgs("exactly","func");args=this._apply("anything");return body=this._applyWithArgs("foreign",LKJSTranslator,"curlyTrans")}).call(this)}));return new StPrimitveMethodNode(name,body,args)}).call(this)},
"propertyBinding":function(){var $elf=this,name,value;return (function(){name=this._apply("anything");value=this._apply("trans");return new StAssignmentNode(new StVariableNode(name),value)}).call(this)},
"if":function(){var $elf=this,cond,t,f;return (function(){cond=this._apply("trans");t=this._apply("trans");f=this._apply("trans");return (function (){if((! t["isSequence"])){new StSequenceNode(t)}else{undefined};(t=new StInvokableNode(t));if((! f["isSequence"])){new StSequenceNode(f)}else{undefined};(f=new StInvokableNode(f));return new StKeywordMessageNode("ifTrue:ifFalse:",[t,f],cond)}).call(this)}).call(this)},
"return":function(){var $elf=this,expr;return (function(){expr=this._apply("trans");return new StReturnNode(expr)}).call(this)},
"test":function(){var $elf=this;return StClassNode}})}
});